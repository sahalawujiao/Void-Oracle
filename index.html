<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>BitFate 比特命运 - 塔罗占卜</title>
    <style>
        :root {
            --gold: #d4af37;
            --deep-purple: #1a1a2e;
            --card-white: #fdfbf7;
        }
        body {
            background-color: var(--deep-purple);
            color: #eee;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            margin: 0;
        }
        h1 { color: var(--gold); letter-spacing: 4px; margin-bottom: 40px; }

        /* 牌阵布局 */
        .spread {
            display: flex;
            gap: 30px;
            perspective: 1200px;
            margin-bottom: 40px;
        }

        .card-slot { width: 160px; text-align: center; }
        .slot-label { 
            color: var(--gold); 
            margin-bottom: 15px; 
            font-size: 0.9em;
            text-transform: uppercase;
        }

        /* 卡牌样式 */
        .card {
            width: 160px;
            height: 280px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            border: 2px solid var(--gold);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-sizing: border-box;
        }

        .card-back {
            background: #222;
            background-image: repeating-linear-gradient(45deg, #222 0, #222 10px, #2a2a2a 10px, #2a2a2a 20px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .card-front {
            background: var(--card-white);
            color: #333;
            transform: rotateY(180deg);
        }

        /* 逆位样式：增加一个 class 控制旋转 */
        .card-front.reversed-img {
            transform: rotateY(180deg) rotateZ(180deg);
        }

        .card.is-flipped { transform: rotateY(180deg); }

        /* 解读区 */
        .reading-panel {
            max-width: 800px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--gold);
            padding: 25px;
            border-radius: 8px;
            display: none;
            line-height: 1.8;
        }

        .card-name { font-weight: bold; color: var(--gold); }
        .rev-tag { color: #cc4444; font-size: 0.8em; margin-left: 5px; }

        button {
            background: transparent;
            color: var(--gold);
            border: 2px solid var(--gold);
            padding: 12px 40px;
            font-size: 1.1em;
            cursor: pointer;
            transition: 0.3s;
            margin-bottom: 40px;
        }
        button:hover { background: var(--gold); color: var(--deep-purple); }
    </style>
</head>
<body>

    <h1>BITFATE 比特命运</h1>

    <div class="spread">
        <div class="card-slot">
            <div class="slot-label">昨日·起源</div>
            <div class="card" id="card-0" onclick="this.classList.toggle('is-flipped')">
                <div class="card-face card-back"></div>
                <div class="card-face card-front" id="front-0"></div>
            </div>
        </div>
        <div class="card-slot">
            <div class="slot-label">今日·现状</div>
            <div class="card" id="card-1" onclick="this.classList.toggle('is-flipped')">
                <div class="card-face card-back"></div>
                <div class="card-face card-front" id="front-1"></div>
            </div>
        </div>
        <div class="card-slot">
            <div class="slot-label">明日·导向</div>
            <div class="card" id="card-2" onclick="this.classList.toggle('is-flipped')">
                <div class="card-face card-back"></div>
                <div class="card-face card-front" id="front-2"></div>
            </div>
        </div>
    </div>

    <button onclick="drawFate()">开启启示</button>

    <div class="reading-panel" id="readingPanel">
        <h3 style="margin-top:0">✨ 命运的丝线：</h3>
        <div id="interpretationContent"></div>
    </div>

    <script>
        // 扩展数据库：加入正位和逆位的简单解读
        const tarotDeck = [
            { name: "愚者", up: "代表新的旅程、好奇心和不畏艰险。建议：勇敢迈出第一步。", rev: "代表鲁莽、不计后果。建议：在跳下深渊前先看清脚下。" },
            { name: "魔术师", up: "代表你有能力掌控当前的资源。建议：现在是行动的最佳时机。", rev: "代表沟通受阻或能力被滥用。建议：重新审视你的动机。" },
            { name: "女祭司", up: "代表直觉和内在智慧。建议：静下心来听听内心的声音。", rev: "代表忽略了直觉，或过于压抑情感。建议：不要逃避真相。" },
            { name: "死神", up: "代表一个阶段的结束和重生。建议：放手过去，拥抱变化。", rev: "代表抗拒改变或停滞不前。建议：强行挽留只会带来更多痛苦。" },
            { name: "恋人", up: "代表和谐的关系与重大的抉择。建议：听从内心的价值观。", rev: "代表失衡或逃避决定。建议：面对现实中的冲突。" },
            { name: "隐士", up: "代表独处与反思。建议：暂时退出社交，寻找真理。", rev: "代表孤独感或过于孤立。建议：适时与外界保持沟通。" }
        ];

        function drawFate() {
            const panel = document.getElementById('readingPanel');
            const content = document.getElementById('interpretationContent');
            panel.style.display = 'none';
            content.innerHTML = "";

            // 1. 洗牌并抽取 3 张
            let shuffled = [...tarotDeck].sort(() => Math.random() - 0.5);
            let slots = ["昨日", "今日", "明日"];
            let fullAnalysis = "";

            for (let i = 0; i < 3; i++) {
                const card = shuffled[i];
                const isReversed = Math.random() > 0.5; // 50% 概率逆位
                const cardUI = document.getElementById(`card-${i}`);
                const frontUI = document.getElementById(`front-${i}`);

                // 重置动画
                cardUI.classList.remove('is-flipped');
                
                // 延迟处理翻牌逻辑
                setTimeout(() => {
                    // 处理正逆位视觉
                    frontUI.classList.toggle('reversed-img', isReversed);
                    
                    // 填充文字
                    const title = isReversed ? `${card.name}<span class="rev-tag">(逆位)</span>` : `${card.name}`;
                    const meaning = isReversed ? card.rev : card.up;
                    
                    frontUI.innerHTML = `<div style="font-size:1.2em; margin-bottom:10px;">${title}</div><p style="font-size:0.8em; color: #666;">${meaning}</p>`;
                    
                    cardUI.classList.add('is-flipped');
                    
                    // 构建底部易懂解读
                    fullAnalysis += `<p><strong>关于${slots[i]}：</strong> 你抽到了 <span class="card-name">${card.name}${isReversed?'(逆位)':''}</span>。${meaning}</p>`;
                    
                    if(i === 2) {
                        content.innerHTML = fullAnalysis;
                        panel.style.display = 'block';
                    }
                }, i * 500);
            }
        }
    </script>
</body>
</html>
